/**
 * eaModule - Library of angular directives
 * @author Eslem Alzate
 * @version v0.0.2
 * @link https://github.com/Eslem/EaModule
 * @license MIT
 */
function initLoad(e){needLoad=0;var t=e.children(),n=t.length;n>0&&prepareLoad(t)}function prepareLoad(e){filtElements=e,needLoad=e.length;for(var t,n=0;n<e.length;n++,t=e[n]){var a=$(t).children("img"),i=a&&a.length>0?!0:!1;i?a[0].onload=function(){elemLoaded()}:elemLoaded()}}function elemLoaded(){loaded++,loaded===needLoad&&(createStyles(".ea-block-filtering div[data-position='{0}']"),createStyles(".ea-block-no-filt div:nth-child({0})"))}function createStyles(e){for(var t=[],n=0,a=0;a<filtElements.length;a++){var i=filtElements[a],o=$(i).offset(),r=o.left+"px",l=o.top+"px",s="{ -webkit-transform: translate3d("+r+", "+l+", 0); transform: translate3d("+r+", "+l+", 0); position:absolute}";t.push(e.replace("{0}",++n)+s)}appendStyles(t)}function appendStyles(e){var t=document.getElementsByTagName("head")[0],n=$("<style>").attr("type","text/css").appendTo(t)[0];n.styleSheet?n.styleSheet.cssText=e.join("\n"):n.textContent=e.join("\n")}angular.module("ea-services",[]),angular.module("ea-directives",[]),angular.module("eaModule",["ea-directives","ea-services"]),angular.module("ea-directives").directive("eaBlocksFilter",function(){return directive});var directive={},iElement,loaded=0,needLoad=0;directive.link=function(e,t,n){$(t).addClass("ea-block-filt"),$(t).addClass("ea-block-no-filt"),e.$watch(n.listItems,function(e,n){n.length>0&&initLoad(t)}),e.filtering="";var a=t.children("div");e.filter=function(n){e.filtering=n,$(a).show(),$(t).addClass("ea-block-filtering").removeClass("ea-block-no-filt");var i=1;$(t).children().each(function(){var e=$(this).attr("data-group");-1!=e.indexOf(n)?($(this).show(),$(this).attr("data-position",i++)):($(this).hide(),$(this).attr("data-position",0))})},e.noFilter=function(){e.filtering="",$(t).removeClass("ea-block-filtering").addClass("ea-block-no-filt"),$(t).children().show()}};var filtElements;angular.module("ea-directives").directive("eaOnClickOutside",["$document",function(e){var t={link:{post:function(t,n,a,i){var o=function(e){var i=n.has(e.target).length>0,o=n[0]==e.target,r=i||o;r||t.$apply(a.eaOnClickOutside)};e.click(o)}}};return t}]),angular.module("ea-directives").directive("eaDropContainer",function(){return{scope:{scopeVar:"=",onFilePicked:"=",canvasHeight:"=",canvasWidth:"=",showThumbnail:"="},template:'<div class="centerDiv">\r\n		<div class="ea-drop-container">\r\n		<h1 class="ea-drop-plus">+</h1>\r\n		<img src="{{defaultPreview}}" class="ea-drop-image" ng-show="defaultPreview">\r\n		</div>\r\n		<input class="ea-drop-input" type="file">\r\n		</div>',link:function(e,t,n){function a(t){inputToCanvas.init(t,function(t){e.$apply(function(){c&&($(d).empty(),d.appendChild(t.canvas),d.style.height=t.fixedSize.height+"px",d.style.width=t.fixedSize.width+"px"),e.scopeVar=t,"function"==typeof e.onFilePicked&&e.onFilePicked(t)})})}function i(e){$(e.target).addClass("over"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function o(e){e.stopPropagation(),$(e.target).addClass("over")}function r(e){e.stopPropagation(),$(e.target).removeClass("over")}function l(e){e.preventDefault();var t=e.dataTransfer.files;a(t[0]),$(e.target).removeClass("over")}var s=t.find("input"),d=t.find("div")[1];e.defaultPreview=n.defaultPreview;var c=!0;"undefined"!==n.showThumbnail&&void 0!==n.showThumbnail&&(c=!1);var u=(function(){e.canvasHeight||e.canvasWidth?(e.canvasWidth&&inputToCanvas.config({MAX_WIDTH:e.canvasWidth}),e.canvasHeight&&inputToCanvas.config({MAX_WIDTH:e.canvasHeight})):inputToCanvas.config({MAX_WIDTH:d.offsetWidth,MAX_HEIGHT:d.offsetHeight})}(),function(){var e=this.files;a(e[0])});s.bind("change",u),d.addEventListener("dragover",i,!1),d.addEventListener("dragenter",o,!1),d.addEventListener("dragleave",r,!1),d.addEventListener("drop",l,!1)}}});var inputToCanvas={};inputToCanvas.previewContainer=document.body,inputToCanvas.MAX_HEIGHT=1e3,inputToCanvas.MAX_WIDTH=1e3,inputToCanvas.config=function(e){for(var t in e)inputToCanvas[t]=e[t]},inputToCanvas.init=function(e,t){var n=document.createElement("canvas");this.fileImgToCanvas(e,n,t)},inputToCanvas.getFixedSize=function(e){var t=e.width,n=e.height;return t>n?t>this.MAX_WIDTH&&(n*=this.MAX_WIDTH/t,t=this.MAX_WIDTH):n>this.MAX_HEIGHT&&(t*=this.MAX_HEIGHT/n,n=this.MAX_HEIGHT),{width:t,height:n}},inputToCanvas.thumbnail,inputToCanvas.fileImgToCanvas=function(e,t,n){var a=document.createElement("img"),i=new FileReader;i.onload=function(e){a.src=e.target.result},i.readAsDataURL(e),a.onload=function(){var i=t.getContext("2d");i.drawImage(a,0,0);var o=inputToCanvas.getFixedSize(a),r=o.width,l=o.height;t.width=r,t.height=l;var i=t.getContext("2d");i.drawImage(a,0,0,r,l);var s=t.toDataURL("image/png");if(inputToCanvas.thumbnail=s,n){var d={name:e.name,img:a,canvas:t,thumbnailURL:s,fixedSize:o,file:e};n(d)}}},angular.module("ea-directives").directive("eaImgFullScreen",["$document","$http",function(e,t){var n={link:{post:function(t,n,a,i){var o;t.showFullScreen=function(e){o=e.target,l()};var r=function(){var e=n.attr("src");a.bigImg&&(e=a.bigImg),$("#eaimgFullScreenImg").attr("src",e)},l=function(){0===$("#eaimgFullScreen").length?s():($(".eaimgFullScreen").fadeIn(),r())},s=function(){var t='<div class="eaimgFullScreen" id="eaimgFullScreen">  <div class="wrap-image"><i class="fa fa-2x fa-close close" ng-click="hide()"></i>  <img alt="" id="eaimgFullScreenImg">  </div>  </div>',n=angular.element(t);e.find("body").append(n),r()},d=function(e){var t=n.has(e.target).length>0,a=n[0]==e.target,i="eaimgFullScreenImg"==e.target.id,r=e.target===o,l=t||a||i||r;l||$("#eaimgFullScreen").fadeOut()};e.click(d),n.bind("click",function(e){e.stopPropagation(),l()})}}};return n}]),angular.module("ea-directives").directive("eaInputFile",function(){var e={};return e.scope={scopeVar:"=",onFilePicked:"="},e.link=function(e,t,n){t.bind("change",function(t){var n=this.files[0];e.$apply(function(){e.scopeVar=n,"function"==typeof e.onFilePicked&&e.onFilePicked(n)})})},e}),angular.module("ea-directives").directive("eaOnSrcError",function(){return{restrict:"EA",link:function(e,t,n){t.bind("error",function(){angular.element(this).attr("src",n.eaOnSrcError)})}}}),angular.module("eaModule").constant("toastr",toastr).config(["toastr",function(e){e.options.timeOut=3e3,e.options.positionClass="toast-top-right",e.options.preventDuplicates=!0,e.options.progressBar=!0}]);
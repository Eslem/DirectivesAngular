/**
 * slem-directive - Library of angular directives
 * @author Eslem Alzate
 * @version v0.0.1
 * @link https://github.com/Eslem/SlemDirectives
 * @license MIT
 */
angular.module("sl",[]),angular.module("sl-directives",[]),angular.module("sl-services",[]),angular.module("sl-directives").directive("slClickedOutside",["$document",function(n){var i={link:{post:function(i,e,t,a){var r=function(n){var a=e.has(n.target).length>0,r=e[0]==n.target,o=a||r;o||i.$apply(t.clickedOutside)};n.click(r)}}};return i}]),angular.module("sl-directives").directive("slDropContainer",function(){return{scope:{scopeVar:"=",onFilePicked:"=",canvasHeight:"=",canvasWidth:"=",showThumbnail:"="},template:'<div class="centerDiv">\r\n		<div class="sfloo-drop-container">\r\n		<h1 class="sfloo-drop-plus">+</h1>\r\n		</div>\r\n		<input class="sfloo-drop-input" type="file">\r\n		</div>',link:function(n,i,e){function t(i){inputToCanvas.init(i,function(i){n.$apply(function(){d&&($(l).empty(),l.appendChild(i.canvas),l.style.height=i.fixedSize.height+"px",l.style.width=i.fixedSize.width+"px"),n.scopeVar=i,"function"==typeof n.onFilePicked&&n.onFilePicked(i)})})}function a(n){$(n.target).addClass("over"),n.stopPropagation(),n.preventDefault(),n.dataTransfer.dropEffect="copy"}function r(n){n.stopPropagation(),$(n.target).addClass("over")}function o(n){n.stopPropagation(),$(n.target).removeClass("over")}function s(n){n.preventDefault();var i=n.dataTransfer.files;t(i[0]),$(n.target).removeClass("over")}var c=i.find("input"),l=i.find("div")[1],d=!0;"undefined"!==e.showThumbnail&&void 0!==e.showThumbnail&&(d=!1);var u=(function(){n.canvasHeight||n.canvasWidth?(n.canvasWidth&&inputToCanvas.config({MAX_WIDTH:n.canvasWidth}),n.canvasHeight&&inputToCanvas.config({MAX_WIDTH:n.canvasHeight})):inputToCanvas.config({MAX_WIDTH:l.offsetWidth,MAX_HEIGHT:l.offsetHeight})}(),function(){var n=this.files;t(n[0])});c.bind("change",u),l.addEventListener("dragover",a,!1),l.addEventListener("dragenter",r,!1),l.addEventListener("dragleave",o,!1),l.addEventListener("drop",s,!1)}}});var inputToCanvas={};inputToCanvas.previewContainer=document.body,inputToCanvas.MAX_HEIGHT=1e3,inputToCanvas.MAX_WIDTH=1e3,inputToCanvas.config=function(n){for(var i in n)inputToCanvas[i]=n[i]},inputToCanvas.init=function(n,i){var e=document.createElement("canvas");this.fileImgToCanvas(n,e,i)},inputToCanvas.getFixedSize=function(n){var i=n.width,e=n.height;return i>e?i>this.MAX_WIDTH&&(e*=this.MAX_WIDTH/i,i=this.MAX_WIDTH):e>this.MAX_HEIGHT&&(i*=this.MAX_HEIGHT/e,e=this.MAX_HEIGHT),{width:i,height:e}},inputToCanvas.thumbnail,inputToCanvas.fileImgToCanvas=function(n,i,e){var t=document.createElement("img"),a=new FileReader;a.onload=function(n){t.src=n.target.result},a.readAsDataURL(n),t.onload=function(){var a=i.getContext("2d");a.drawImage(t,0,0);var r=inputToCanvas.getFixedSize(t),o=r.width,s=r.height;i.width=o,i.height=s;var a=i.getContext("2d");a.drawImage(t,0,0,o,s);var c=i.toDataURL("image/png");if(inputToCanvas.thumbnail=c,e){var l={name:n.name,img:t,canvas:i,thumbnailURL:c,fixedSize:r};e(l)}}},angular.module("sl-directives").directive("slImgFullScreen",["$document","$http",function(n,i){var e={link:{post:function(i,e,t,a){var r=function(){var n=e.attr("src");t.bigImg&&(n=t.bigImg),$("#imgFullScreenImg").attr("src",n)},o=function(){0===$("#imgFullScreen").length?s():($(".imgFullScreen").fadeIn(),r())},s=function(){var i='<div class="imgFullScreen" id="imgFullScreen">  <div class="wrap-image"><i class="fa fa-2x fa-close close" ng-click="hide()">X</i>  <img alt="" id="imgFullScreenImg">  </div>  </div>',e=angular.element(i);n.find("body").append(e),r()},c=function(n){var i=e.has(n.target).length>0,t=e[0]==n.target,a="imgFullScreenImg"==n.target.id,r=i||t||a;r||$("#imgFullScreen").fadeOut()};n.click(c),e.bind("click",function(n){n.stopPropagation(),o()})}}};return e}]),angular.module("sl-directives").directive("slInputFile",function(){var n={};return n.scope={scopeVar:"=",onFilePicked:"="},n.link=function(n,i,e){i.bind("change",function(i){var e=this.files[0];n.$apply(function(){n.scopeVar=e,"function"==typeof n.onFilePicked&&n.onFilePicked(e)})})},n}),angular.module("sl-directives").directive("slOnSrcError",function(){return{restrict:"EA",link:function(n,i,e){i.bind("error",function(){angular.element(this).attr("src",e.slOnSrcError)})}}});